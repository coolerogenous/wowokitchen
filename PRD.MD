
# 📝 旺财厨房 (WoWoKitchen) - 产品需求文档 (PRD)

## 1. 项目愿景 (Project Vision)

打造一个**计算型的厨房管理与社交组局工具。核心价值在于将复杂的菜品构成转化为精确的** **采购清单**和**成本预算**，并通过“组局”功能分享给好友，解决聚餐场景下的筹备效率问题。

## 2. 开发环境与部署规范 (Development Context)

**这是 AI 生成代码时必须严格遵守的基础设施约束：**

* **本地开发环境 (Dev)**：
* **操作系统**：Windows (Localhost)。
* **文件系统**：必须兼容 Windows 的路径格式（如反斜杠转义或使用跨平台路径库）。
* **数据存储**：本地开发时使用**Mysql** （无需安装额外服务，开箱即用）。
* **特别提醒**：必须选择本地开发环境支持的技术栈，如果担心本地没有，需要我确认。
* **版本控制**：必须使用git进行版本控制，即使补充 .gitignore文件。



* **生产环境预留 (Prod Ready)**：
* **配置分离**：系统必须通过**环境变量**（Environment Variables）来区分 Dev 和 Prod 环境。
* **数据库切换**：代码架构需预留接口，以便在生产环境中无缝切换到企业级数据库（如 PostgreSQL/MySQL），而无需重写业务逻辑。
* **容器化准备**：考虑到未来部署在 Linux 服务器作为网页应用，路径处理和依赖管理需保持跨平台兼容性。



---

## 3. 核心功能模块 (Core Modules)

### 3.1 资产管理模块 (Asset Management)

用户私有的基础数据库，是所有计算的基石。

* **食材库 (Ingredient Inventory)**：
* 用户可创建、编辑、删除食材。
* **关键属性**：名称、**采购单价**（用于核算成本）、**采购规格**（如：500g/包，用于生成清单时的单位参考）。


* **菜品库 (Dish Library)**：
* 用户通过“组合食材”来定义一道菜。
* **BOM 逻辑**：一道菜包含多种食材，每种食材有特定的**消耗量**。
* **自动计算**：系统需根据关联食材的单价和消耗量，自动计算出该菜品的**预估成本**。


* **菜单集 (Menu Collection)**：
* 菜品的集合（如“年夜饭”、“减脂餐”），可以包含多个菜品，可以自己创建菜单，也可以从菜品库中选择菜品。
* 用户可将多个已存在的菜品添加到一个菜单中。
* 可以对菜单进行编辑，删除，导出详细清单，分享密语，导入密语。



### 3.2 智能计算引擎 (Calculation Engine)

这是本产品的核心算法逻辑，AI 需为其设计独立的计算服务。

* **清单生成逻辑 (Aggregation Logic)**：
* **输入**：一个菜单或一个饭局（包含 N 道菜）。
* **合并同类项**：系统遍历所有菜品下的食材，将相同食材的消耗量进行**累加**（例如：菜A需2个蛋，菜B需3个蛋 -> 输出5个蛋）。
* **成本核算**：基于累加后的总量 × 录入的单价 = **总预估采购成本**。


* **导出格式**：
* 生成的清单需包含：菜品名称，食材名称、总需求量、预估总价等数据，可以导出为图片。



### 3.3 社交与共享模块 (Social & Sharing)

#### A. 静态分享：密语系统 (Token System)

* **导出**：用户可将单个“菜品”或整个“菜单”生成一个唯一的**字符串密语**（Token）。
* **导入**：
* 其他用户输入密语后，系统解析数据。
* **数据克隆**：将原作者的菜品及所需食材配置，**完整复制**一份到当前用户的数据库中。
* *去重策略*：如果导入的食材在本地已存在（同名），需智能提示或自动关联，避免数据冗余。



#### B. 动态协作：饭局模式 (Party Mode)

* **发起组局 (Host)**：
* 用户创建一个“局”，可预设部分菜品。
* 系统生成一个可分享的链接/入口。


* **好友参与 (Guest)**：
* 好友通过链接进入，**无需注册复杂账户**（轻量级参与，类似游客）。
* 好友可以查看当前菜单，并从中**选择预设的菜品**加入这个“局”。


* **实时同步**：
* Host 端能看到好友添加的菜品，以及随之变化的**总预算**，且支持导出清单。


* **状态控制 (State Machine)**：
* **进行中**：允许任何人加菜/改动。
* **已暂停/锁定**：Host 按下暂停键后，所有人不可再修改菜单。此状态用于生成最终的“定局清单”。



---

## 4. 用户交互流程 (User Flow)

1. **初始化**：用户首次进入，录入几个常用食材（如：猪肉、青椒）。
2. **建菜**：用户创建“青椒肉丝”，关联猪肉 200g，青椒 100g -> 系统显示成本 15元。
3. **组局**：
* 用户发起“周五火锅局”。
* 分享给好友 A 和 B。
* A 加了“毛肚”，B 加了“鸭肠”。
* 用户看到总价变为 300 元。


4. **锁定与采购**：
* 用户点击“暂停组局”。
* 系统生成详细采购清单。
* 用户拿着清单去超市，逐项勾选购买。



---

## 5. 给 AI (Antigravity) 的提示建议

* **模块化设计**：请将“计算逻辑”与“界面展示”解耦，确保未来更换前端或数据库时核心算法不变。
* **数据完整性**：在设计数据结构时，务必保证“菜品”删除后，不影响历史“饭局”的数据记录（可能需要快照或软删除机制）。
* **Windows 友好**：所有脚本和路径操作必须优先考虑 Windows 兼容性。

---
